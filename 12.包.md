<!--
 * @Author: Azhou
 * @Date: 2021-11-05 21:19:04
 * @LastEditors: Azhou
 * @LastEditTime: 2021-11-05 21:55:17
-->
# Go语言的包 package

+ GO使用包来组织源代码和代码编译，实现代码复用
+ 任何源代码必须属于某个包，同时源码文件的第一行有效代码必须是package pacakgeName 语句，声明自己所在的包。
+ 包名为 main 为应用程序的入口包，编译不包含 main 包的源码文件时不会得到可执行文件
+ 一个文件夹下的所有源码文件只能属于同一个包，同样属于同一个包的源码文件不能放在多个文件夹下

## GOPATH
+ $GOROOT  GO 语言环境在计算机的安装位置，包含GO标准库的源代码
+ $GOPATH   GO 语言工作目录，可以有多个
+ 早期正式编程前要先设置当前开发目录在 GOPATH环境变量
+ GOPATH指定的工作目录通常包括3个子目录
  + src : 代码保存目录，每个包一个文件夹
  + bin:产生的二进制可执行文件存放目录
  + pkg: 非main包生成后存放路径

## go.mod
+ 使用GOPATH 不太方便 
+ go.mod是Go1.11版本新引入的官方包管理工具
+ 在项目目录下用go.mod 文件来记录依赖包具体版本，方便依赖包、源代码和版本控制的管理

> Go modules 命令  

| 命令            | 作用                            |
| --------------- | ------------------------------- |
| go mod init     | 生成 go.mod文件                 |
| go mod download | 下载 go.mod文件中指明的所有依赖 |
| go mod tidy     | 整理现有的依赖                  |
| go mod graph    | 查看现有的依赖结构              |
| go mod edit     | 编辑 go.mod文件                 |
| go mod vendor   | 导出项目所有的依赖到vendor目录  |
| go mod verify   | 检验一个模块是否被篡改过        |
| go mod why      | 查看为什么需要依赖某模块        |

## 包的引用格式
+ 标准引用格式
```  
import "fmt"  
fmt.Printf("Hello world！")
```

+ 自定义别名引用格式
```  
import F "fmt"
F.Printf("Hello world！")
```

+ 省略引用格式
```  
import . "fmt"
//不需要加前缀 fmt.
Printf("Hello world！")
```

+ 匿名引用格式: <code>import _ "fmt"</code>
  + 引用包，但是代码中却没有使用包，编译器会报错
  + 在引用某个包时，如果只是希望执行包初始化的 init 函数，而不使用包内部的数据时，可以使用匿名引用格式

## 包的init()函数

+ init()是特殊的函数，不能够被人为调用，而是在每个包完成初始化后自动执行，并且执行`优先级比 main 函数高`
+ init()常用于在开始执行程序之前对数据进行检验或修复，或者在程序开始之前调用后台执行的 goroutine
+ 每个源码可以使用 1 个 init() 函数，一个包可以有多个 init 函数，包加载时会执行全部的 init 函数，但并不能保证执行顺序

## 包加载
+ 程序从 main 函数引用的包开始，逐级查找包的引用，直到找到没有引用其他包的包，最终生成一个包引用的有向无环图
+ 每个包会先初始化常量，然后是全局变量，最后执行包的 init 函数

## 包内标识符导出

+ 一个包里的标识符（如类型、变量、常量等）要被外部访问，需将要导出的标识符的首字母大写
```
var myVar = 100 //内部引用
const MyConst = "hello" //导出
type MyStruct struct {  //导出
}
```
+ 在被导出的结构体或接口中，如果它们的字段或方法首字母是大写，外部可以访问这些字段和方法
```
type MyStruct struct {//结构体要被导出    
    ExportedField int// 包外可以访问的字段    
    privateField int // 仅限包内访问的字段
}
type MyInterface interface {//接口要被导出   
    ExportedMethod() // 包外可以访问的方法    
    privateMethod()// 仅限包内访问的方法
}
```